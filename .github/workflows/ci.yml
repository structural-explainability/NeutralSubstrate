# REQ: Verify Lean proofs compile on every push and PR.
# WHY: Proofs are the deliverable; broken proofs must not merge.
name: Lean Action CI

on:
  push:
  pull_request:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v6 # OBS: v6 current as of Dec 2025
      - uses: leanprover/lean-action@v1 # OBS: v1 current as of Dec 2025

      # REQ.CI.DEPENDENCIES
      # WHY:
      #   lake-manifest.json is generated and not committed.
      #   CI must regenerate it deterministically.
      - name: Lake update
        run: lake update

      # REQ.CI.BUILD
      # WHY:
      #   Proofs are the deliverable.
      - name: Lake build
        run: lake build